<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>test</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
	</head>
	<body onload='tryToFindMathJax();'>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b>multiply by 1</b><br>
<code>asserteq(1, (Constant(1)*Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>divide by 1</b><br>
<code>asserteq(1, (Constant(1)/Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>divide by -1</b><br>
<code>asserteq(-1, (-Constant(1)/Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>multiply and divide by 1</b><br>
<code>asserteq(1, (Constant(1)/(Constant(1)*Constant(1)))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>commutativity</b><br>
<code></code>
</td><td>
<tr><td>
<b>add commutative</b><br>
<code>asserteq(x+y, y+x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>mul commutative</b><br>
<code>asserteq(x*y, y*x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>pruning operations</b><br>
<code></code>
</td><td>
<tr><td>
<b>prune 1*</b><br>
<code>asserteq(x, (1*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>prune *1</b><br>
<code>asserteq(x, (x*1)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>prune *0</b><br>
<code>asserteq(0, (0*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x/x)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(x^2, (x*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>simplify(): div add mul</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(((x+1)*y)(), (x*y + y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((x+1)*(y+1))(), (x*y + x + y + 1)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((2/(2*x*y))(), (1/(x*y))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1-(1-x))(), x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((1-(1-x))/x)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1 + 1/x + 1/x)(), (1 + 2/x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1 + 1/x + 2/x)(), (1 + 3/x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>factoring integers</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((Constant(2)/Constant(2))(), Constant(1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((Constant(2)/Constant(4))(), (Constant(1)/Constant(2))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(((2*x + 2*y)/2)(), (x+y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((-2*x + 2*y)/2)(), (-x+y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(-1-x, -(1+x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((-x)/x, -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x/(-x)), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-x-1)/(x+1), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x-1)/(1-x), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( (x*y)/(x*y)^2, 1/(x*y) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>origin of the error:</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( 1/(1-x), -1/(x-1) )</code>
</td><td>
expected $\frac{1}{{1} - {x}}$ to equal $\frac{-1}{{x} - {1}}$<br>
found $\frac{1}{{1} - {x}}$ vs $-{\frac{1}{{-{1}} + {x}}}$<br>
lhs stack<br>
Init	$\frac{1}{{1} - {x}}$	<br>
unm/Prune/apply	${{-1}} {{x}}$	<br>
-/Prune/apply	${1} + {{{-1}} {{x}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Expand	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Factor	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Tidy	$\frac{1}{{1} - {x}}$	<br>
rhs stack<br>
Init	$\frac{-1}{{x} - {1}}$	<br>
unm/Prune/apply	$-1$	<br>
-/Prune/apply	${-1} + {x}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Expand	$\frac{-1}{{-1} + {x}}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Factor	$\frac{-1}{{{{\frac{1}{-1}}{\left({{-1} + {x}}\right)}}} \cdot {{-1}}}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Tidy	$-{\frac{1}{{-{1}} + {x}}}$	<br>
<span style="color:red">BAD</span><br>C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:30: failed<br>stack traceback:<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:96: in function <C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:95><br>
	[C]: in function 'error'<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:30: in function 'asserteq'<br>
	[string "asserteq( 1/(1-x), -1/(x-1) )"]:1: in main chunk<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:88: in function <C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:87><br>
	[C]: in function 'xpcall'<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:87: in function 'exec'<br>
	tests\unit\test.lua:211: in function 'cb'<br>
	C:\Users\Chris\Projects\lua\ext\timer.lua:49: in function 'timer'<br>
	tests\unit\test.lua:6: in main chunk<br>
	[C]: at 0x7ff74d444950
</td></tr>
<tr><td>
<b>without needing to factor the polynomial</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(((x-1)*(x+1))/(x+1), x-1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((x-1)*(x+1))/(x-1), x+1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x-1)/((x+1)*(x-1)), 1/(x+1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x+1)/((x+1)*(x-1)), 1/(x-1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>with needing to factor the polynomial</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((x^2-1)/(x+1), x-1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x^2-1)/(x-1), x+1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x-1)/(x^2-1), 1/(x+1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x+1)/(x^2-1), 1/(x-1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>... and with signs flipped</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((1-x^2)/(x+1), -(x-1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1-x^2)/(x-1), -(x+1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x-1)/(1-x^2), -1/(x+1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x+1)/(1-x^2), -1/(x-1))</code>
</td><td>
expected $\frac{{x} + {1}}{{1} - {{x}^{2}}}$ to equal $\frac{-1}{{x} - {1}}$<br>
found $\frac{1}{{1} - {x}}$ vs $-{\frac{1}{{-{1}} + {x}}}$<br>
lhs stack<br>
Init	$\frac{{x} + {1}}{{1} - {{x}^{2}}}$	<br>
unm/Prune/apply	${{-1}} {{{x}^{2}}}$	<br>
-/Prune/apply	${1} + {{{-1}} {{{x}^{2}}}}$	<br>
Prune	$\frac{{1} + {x}}{{1} + {{{-1}} {{{x}^{2}}}}}$	<br>
^/Expand/integerPower	${{x}} {{x}}$	<br>
Expand	$\frac{{1} + {x}}{{1} + {{{-1}} {{{{x}} {{x}}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${x}^{2}$	<br>
Prune	$\frac{{1} + {x}}{{1} + {{{-1}} {{{x}^{2}}}}}$	<br>
Factor	$\frac{{1} + {x}}{{{\left({{ {-{1}} {{x}}} + {1}}\right)}} {{\left({{1} + {x}}\right)}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Expand	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Factor	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Prune	$\frac{1}{{1} + {{{-1}} {{x}}}}$	<br>
Tidy	$\frac{1}{{1} - {x}}$	<br>
rhs stack<br>
Init	$\frac{-1}{{x} - {1}}$	<br>
unm/Prune/apply	$-1$	<br>
-/Prune/apply	${-1} + {x}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Expand	$\frac{-1}{{-1} + {x}}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Factor	$\frac{-1}{{{{\frac{1}{-1}}{\left({{-1} + {x}}\right)}}} \cdot {{-1}}}$	<br>
Prune	$\frac{-1}{{-1} + {x}}$	<br>
Tidy	$-{\frac{1}{{-{1}} + {x}}}$	<br>
<span style="color:red">BAD</span><br>C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:30: failed<br>stack traceback:<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:96: in function <C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:95><br>
	[C]: in function 'error'<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:30: in function 'asserteq'<br>
	[string "asserteq((x+1)/(1-x^2), -1/(x-1))"]:1: in main chunk<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:88: in function <C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:87><br>
	[C]: in function 'xpcall'<br>
	C:\Users\Chris\Projects\lua\symmath\tests\unit\unit.lua:87: in function 'exec'<br>
	tests\unit\test.lua:211: in function 'cb'<br>
	C:\Users\Chris\Projects\lua\ext\timer.lua:49: in function 'timer'<br>
	tests\unit\test.lua:6: in main chunk<br>
	[C]: at 0x7ff74d444950
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>expand(): add div mul</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>factor(): mul add div</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>infinite.</b><br>
<code></code>
</td><td>
<tr><td>
<b>using https://en.wikipedia.org/wiki/Limit_of_a_function</b><br>
<code></code>
</td><td>
<tr><td>
<b>TODO should these be valid, or should they always produce 'invalid'</b><br>
<code></code>
</td><td>
<tr><td>
<b>and only Limit() produce valid operations on infinity?</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(inf, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assertne(inf, -inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assertne(inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>q + inf = inf for q != -inf</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(inf + inf, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf + 0, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf + 1, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf - 1, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf + x + y, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>q * inf = inf for q > 0 (incl q == inf)</b><br>
<code></code>
</td><td>
<tr><td>
<b>q * inf = -inf for q < 0 (incl q == -inf)</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((inf * inf), inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((inf * -inf), -inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((inf * -1), -inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((inf * -1 * -2), inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((inf * 1 * 2), inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>TODO this should be unknown unless x is defined as a positive or negative real</b><br>
<code>asserteq(inf * x, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf / 2, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>0 * inf = invalid</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(inf * 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf / 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>q / inf = 0 for q != inf and q != -inf</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(-2 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-1 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-.5 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(0 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(.5 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(1 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(2 / inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>inf^q = 0 for q < 0</b><br>
<code></code>
</td><td>
<tr><td>
<b>inf^q = inf for q > 0</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ -2, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ -1, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ -.5, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ .5, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ 1, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ 2, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ inf, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>q^inf = 0 for 0 < q < 1</b><br>
<code></code>
</td><td>
<tr><td>
<b>q^inf = inf for 1 < q</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((-2) ^ inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-.5) ^ inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(0 ^ inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(.5 ^ inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(2 ^ inf, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>q^-inf = inf for 0 < q < 1</b><br>
<code></code>
</td><td>
<tr><td>
<b>q^-inf = 0 for 1 < q</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((-2) ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-.5) ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(0 ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(.5 ^ -inf, inf)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(2 ^ -inf, 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>indeterminant:</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(Constant(0) / 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-inf / inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf / inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf / -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-inf / -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(0 * inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(0 * -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf + -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(Constant(0) ^ 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(inf ^ 0, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-1) ^ inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-1) ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(1 ^ inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(1 ^ -inf, invalid)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>trigonometry</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((sin(x)^2+cos(x)^2)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((y*sin(x)^2+y*cos(x)^2)(), y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((y+y*sin(x)^2+y*cos(x)^2)(), 2*y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1+y*sin(x)^2+y*cos(x)^2)(), 1+y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(1+cos(x)^2+cos(x)^2, 1+2*cos(x)^2)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-1+cos(x)^2+cos(x)^2, -1+2*cos(x)^2)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( cos(x)^2 + sin(x)^2, 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( (cos(x)*y)^2 + (sin(x)*y)^2, y^2)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>some more stuff</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((y-x)/(x-y), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x+y)/(x+y)^2, 1/(x+y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-x+y)/(-x+y)^2, 1/(-x+y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy^2 - gUxx*gUyy) / (gUxx * gUyy - gUxy^2), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy - gUxx*gUyy) / (gUxx * gUyy - gUxy), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy - gUxx) / (gUxx - gUxy), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>it would be nice if the final form of sin(x)^2 was exactly that.</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert( printbr((sin(x)^2)()) == sin(x)^2 )</code>
</td><td>
${\sin\left(  x\right)}^{2}$
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert( not( Constant(0) == x * y ) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert( Constant(0) ~= x * y )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):subst( (v'^k' * v'^l' * g'_kl'):eq(var'vsq') ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):replace( v'^k' * v'^l' * g'_kl', var'vsq' ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):replace( v'^k' * v'^l', var'vsq' ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):replace( v'^k', var'vsq' ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>'a' var lexically before 'f' var, squared, times -1's, simplification loop.  oscillates between factoring out the -1 or not.</b><br>
<code>asserteq(-f * a^2 + f^3 * a^2 - f^5 * a^2, -f * a^2 * (1 - f^2 + f^4))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>'g' var lexically before 'f' var, no simplification loop</b><br>
<code>asserteq(-f * g^2 + f^3 * g^2 - f^5 * g^2, -f * g^2 * (1 - f^2 + f^4), true)</code>
</td><td>
expected ${{ {-{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}}} - {{{{f}^{5}}} {{{g}^{2}}}}$ to equal ${-{f}} {{{g}^{2}}} {{\left({{{1} - {{f}^{2}}} + {{f}^{4}}}\right)}}$<br>
found ${{f}} {{{g}^{2}}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$ vs ${{f}} {{{g}^{2}}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$<br>
lhs stack<br>
Init	${{ {-{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}}} - {{{{f}^{5}}} {{{g}^{2}}}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
*/Prune/flatten	${{-1}} {{f}} {{{g}^{2}}}$	<br>
unm/Prune/apply	${{-1}} {{{f}^{5}}} {{{g}^{2}}}$	<br>
-/Prune/apply	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
Prune	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
^/Expand/integerPower	${{g}} {{g}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}}$	<br>
^/Expand/integerPower	${{g}} {{g}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}} {{f}}$	<br>
^/Expand/integerPower	${{g}} {{g}}$	<br>
Expand	${{{-1}} {{f}} {{{{g}} {{g}}}}} + {{{{{f}} {{f}} {{f}}}} {{{{g}} {{g}}}}} + {{{-1}} {{{{f}} {{f}} {{f}} {{f}} {{f}}}} {{{{g}} {{g}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${f}^{3}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${f}^{5}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
Prune	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
Factor	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Expand	${{{f}} {{{{g}} {{g}}}} \cdot {{-1}}} + {{{f}} {{{{g}} {{g}}}} {{{{f}} {{f}}}}} + {{{f}} {{{{g}} {{g}}}} {{{{-1}} {{{{f}} {{f}} {{f}} {{f}}}}}}}$	<br>
Prune	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
Factor	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Tidy	${{f}} {{{g}^{2}}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$	<br>
rhs stack<br>
Init	${-{f}} {{{g}^{2}}} {{\left({{{1} - {{f}^{2}}} + {{f}^{4}}}\right)}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
unm/Prune/apply	${{-1}} {{{f}^{2}}}$	<br>
-/Prune/apply	${1} + {{{-1}} {{{f}^{2}}}}$	<br>
+/Prune/flatten	${1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}$	<br>
*/Prune/flatten	${{-1}} {{f}} {{{g}^{2}}} {{\left({{1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}}\right)}}$	<br>
Prune	${{-1}} {{f}} {{{g}^{2}}} {{\left({{1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}}\right)}}$	<br>
^/Expand/integerPower	${{g}} {{g}}$	<br>
^/Expand/integerPower	${{f}} {{f}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}}$	<br>
*/Expand/apply	${{{-1}} {{f}} {{{{g}} {{g}}}} {{1}}} + {{{-1}} {{f}} {{{{g}} {{g}}}} {{{{-1}} {{{{f}} {{f}}}}}}} + {{{-1}} {{f}} {{{{g}} {{g}}}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
Expand	${{{-1}} {{f}} {{{{g}} {{g}}}} {{1}}} + {{{-1}} {{f}} {{{{g}} {{g}}}} {{{{-1}} {{{{f}} {{f}}}}}}} + {{{-1}} {{f}} {{{{g}} {{g}}}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${f}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${{{f}^{3}}} {{{g}^{2}}}$	<br>
*/Prune/flatten	${{{f}^{3}}} {{{g}^{2}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${g}^{2}$	<br>
+/Prune/combineConstants	$4$	<br>
*/Prune/apply	${f}^{4}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${{-1}} {{{f}^{5}}} {{{g}^{2}}}$	<br>
Prune	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
Factor	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Expand	${{{f}} {{{{g}} {{g}}}} \cdot {{-1}}} + {{{f}} {{{{g}} {{g}}}} {{{{f}} {{f}}}}} + {{{f}} {{{{g}} {{g}}}} {{{{-1}} {{{{f}} {{f}} {{f}} {{f}}}}}}}$	<br>
Prune	${{{-1}} {{f}} {{{g}^{2}}}} + {{{{f}^{3}}} {{{g}^{2}}}} + {{{-1}} {{{f}^{5}}} {{{g}^{2}}}}$	<br>
Factor	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{f}} {{{g}^{2}}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Tidy	${{f}} {{{g}^{2}}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$	<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>replace -1's with +1's, no simplification loop</b><br>
<code>asserteq(f * a^2 + f^3 * a^2 + f^5 * a^2, f * a^2 * (1 + f^2 + f^4), true)</code>
</td><td>
expected ${{{f}} {{{a}^{2}}}} + {{{{f}^{3}}} {{{a}^{2}}}} + {{{{f}^{5}}} {{{a}^{2}}}}$ to equal ${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$<br>
found ${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$ vs ${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$<br>
lhs stack<br>
Init	${{{f}} {{{a}^{2}}}} + {{{{f}^{3}}} {{{a}^{2}}}} + {{{{f}^{5}}} {{{a}^{2}}}}$	<br>
Prune	${{{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{3}}}} + {{{{a}^{2}}} {{{f}^{5}}}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}} {{f}}$	<br>
Expand	${{{f}} {{{{a}} {{a}}}}} + {{{{{a}} {{a}}}} {{{{f}} {{f}} {{f}}}}} + {{{{{a}} {{a}}}} {{{{f}} {{f}} {{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${f}^{3}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${f}^{5}$	<br>
Prune	${{{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{3}}}} + {{{{a}^{2}}} {{{f}^{5}}}}$	<br>
Factor	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$	<br>
Prune	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$	<br>
Expand	${{{f}} {{{{a}} {{a}}}} {{1}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}} {{f}} {{f}}}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}}}}}$	<br>
Prune	${{{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{5}}}} + {{{{a}^{2}}} {{{f}^{3}}}}$	<br>
Factor	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$	<br>
Prune	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$	<br>
Tidy	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$	<br>
rhs stack<br>
Init	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$	<br>
Prune	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{2}} + {{f}^{4}}}\right)}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}}$	<br>
*/Expand/apply	${{{f}} {{{{a}} {{a}}}} {{1}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}}}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
Expand	${{{f}} {{{{a}} {{a}}}} {{1}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}}}}} + {{{f}} {{{{a}} {{a}}}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${f}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${{{a}^{2}}} {{{f}^{3}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$4$	<br>
*/Prune/apply	${f}^{4}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${{{a}^{2}}} {{{f}^{5}}}$	<br>
Prune	${{{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{3}}}} + {{{{a}^{2}}} {{{f}^{5}}}}$	<br>
Factor	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$	<br>
Prune	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$	<br>
Tidy	${{f}} {{{a}^{2}}} {{\left({{1} + {{f}^{4}} + {{f}^{2}}}\right)}}$	<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>replace a^2 with a, no simplification loop</b><br>
<code>asserteq(-f * a + f^3 * a - f^5 * a, -f * a * (1 - f^2 + f^4), true)</code>
</td><td>
expected ${{ {-{f}} {{a}}} + {{{{f}^{3}}} {{a}}}} - {{{{f}^{5}}} {{a}}}$ to equal ${-{f}} {{a}} {{\left({{{1} - {{f}^{2}}} + {{f}^{4}}}\right)}}$<br>
found ${{a}} {{f}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$ vs ${{a}} {{f}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$<br>
lhs stack<br>
Init	${{ {-{f}} {{a}}} + {{{{f}^{3}}} {{a}}}} - {{{{f}^{5}}} {{a}}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
*/Prune/flatten	${{-1}} {{a}} {{f}}$	<br>
unm/Prune/apply	${{-1}} {{a}} {{{f}^{5}}}$	<br>
-/Prune/apply	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
Prune	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}} {{f}}$	<br>
Expand	${{{-1}} {{a}} {{f}}} + {{{a}} {{{{f}} {{f}} {{f}}}}} + {{{-1}} {{a}} {{{{f}} {{f}} {{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${f}^{3}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${f}^{5}$	<br>
Prune	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
Factor	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Expand	${{{a}} {{f}} \cdot {{-1}}} + {{{a}} {{f}} {{{{f}} {{f}}}}} + {{{a}} {{f}} {{{{-1}} {{{{f}} {{f}} {{f}} {{f}}}}}}}$	<br>
Prune	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
Factor	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Tidy	${{a}} {{f}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$	<br>
rhs stack<br>
Init	${-{f}} {{a}} {{\left({{{1} - {{f}^{2}}} + {{f}^{4}}}\right)}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
unm/Prune/apply	${{-1}} {{{f}^{2}}}$	<br>
-/Prune/apply	${1} + {{{-1}} {{{f}^{2}}}}$	<br>
+/Prune/flatten	${1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}$	<br>
*/Prune/flatten	${{-1}} {{a}} {{f}} {{\left({{1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}}\right)}}$	<br>
Prune	${{-1}} {{a}} {{f}} {{\left({{1} + {{{-1}} {{{f}^{2}}}} + {{f}^{4}}}\right)}}$	<br>
^/Expand/integerPower	${{f}} {{f}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}} {{f}}$	<br>
*/Expand/apply	${{{-1}} {{a}} {{f}} {{1}}} + {{{-1}} {{a}} {{f}} {{{{-1}} {{{{f}} {{f}}}}}}} + {{{-1}} {{a}} {{f}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
Expand	${{{-1}} {{a}} {{f}} {{1}}} + {{{-1}} {{a}} {{f}} {{{{-1}} {{{{f}} {{f}}}}}}} + {{{-1}} {{a}} {{f}} {{{{f}} {{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${f}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${{a}} {{{f}^{3}}}$	<br>
*/Prune/flatten	${{a}} {{{f}^{3}}}$	<br>
+/Prune/combineConstants	$4$	<br>
*/Prune/apply	${f}^{4}$	<br>
+/Prune/combineConstants	$5$	<br>
*/Prune/apply	${{-1}} {{a}} {{{f}^{5}}}$	<br>
Prune	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
Factor	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Expand	${{{a}} {{f}} \cdot {{-1}}} + {{{a}} {{f}} {{{{f}} {{f}}}}} + {{{a}} {{f}} {{{{-1}} {{{{f}} {{f}} {{f}} {{f}}}}}}}$	<br>
Prune	${{{-1}} {{a}} {{f}}} + {{{a}} {{{f}^{3}}}} + {{{-1}} {{a}} {{{f}^{5}}}}$	<br>
Factor	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Prune	${{a}} {{f}} {{\left({{-1} + {{f}^{2}} + {{{-1}} {{{f}^{4}}}}}\right)}}$	<br>
Tidy	${{a}} {{f}} {{\left({{-{1}} + {{{f}^{2}} - {{f}^{4}}}}\right)}}$	<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>replace f * quadratic of f^2 with f * quadratic of f, no simplification loop</b><br>
<code>asserteq(-f * a^2 + f^2 * a^2 - f^3 * a^2, -f * a^2 * (1 - f  + f^2), true)</code>
</td><td>
expected ${{ {-{f}} {{{a}^{2}}}} + {{{{f}^{2}}} {{{a}^{2}}}}} - {{{{f}^{3}}} {{{a}^{2}}}}$ to equal ${-{f}} {{{a}^{2}}} {{\left({{{1} - {f}} + {{f}^{2}}}\right)}}$<br>
found ${-{{{f}} {{{a}^{2}}}}} + {{{{{a}^{2}}} {{{f}^{2}}}} - {{{{a}^{2}}} {{{f}^{3}}}}}$ vs ${-{{{f}} {{{a}^{2}}}}} + {{{{{a}^{2}}} {{{f}^{2}}}} - {{{{a}^{2}}} {{{f}^{3}}}}}$<br>
lhs stack<br>
Init	${{ {-{f}} {{{a}^{2}}}} + {{{{f}^{2}}} {{{a}^{2}}}}} - {{{{f}^{3}}} {{{a}^{2}}}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
*/Prune/flatten	${{-1}} {{f}} {{{a}^{2}}}$	<br>
unm/Prune/apply	${{-1}} {{{a}^{2}}} {{{f}^{3}}}$	<br>
-/Prune/apply	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}} {{f}}$	<br>
Expand	${{{-1}} {{f}} {{{{a}} {{a}}}}} + {{{{{a}} {{a}}}} {{{{f}} {{f}}}}} + {{{-1}} {{{{a}} {{a}}}} {{{{f}} {{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${f}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${f}^{3}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
*/Factor/combineMulOfLikePow	${\left({{{a}} {{f}}}\right)}^{2}$	<br>
Factor	${{{-1}} {{f}} {{{a}^{2}}}} + {{\left({{{a}} {{f}}}\right)}^{2}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Tidy	${-{{{f}} {{{a}^{2}}}}} + {{{{{a}^{2}}} {{{f}^{2}}}} - {{{{a}^{2}}} {{{f}^{3}}}}}$	<br>
rhs stack<br>
Init	${-{f}} {{{a}^{2}}} {{\left({{{1} - {f}} + {{f}^{2}}}\right)}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
unm/Prune/apply	${{-1}} {{f}}$	<br>
-/Prune/apply	${1} + {{{-1}} {{f}}}$	<br>
+/Prune/flatten	${1} + {{{-1}} {{f}}} + {{f}^{2}}$	<br>
*/Prune/flatten	${{-1}} {{f}} {{{a}^{2}}} {{\left({{1} + {{{-1}} {{f}}} + {{f}^{2}}}\right)}}$	<br>
Prune	${{-1}} {{f}} {{{a}^{2}}} {{\left({{1} + {{{-1}} {{f}}} + {{f}^{2}}}\right)}}$	<br>
^/Expand/integerPower	${{a}} {{a}}$	<br>
^/Expand/integerPower	${{f}} {{f}}$	<br>
*/Expand/apply	${{{-1}} {{f}} {{{{a}} {{a}}}} {{1}}} + {{{-1}} {{f}} {{{{a}} {{a}}}} {{{{-1}} {{f}}}}} + {{{-1}} {{f}} {{{{a}} {{a}}}} {{{{f}} {{f}}}}}$	<br>
Expand	${{{-1}} {{f}} {{{{a}} {{a}}}} {{1}}} + {{{-1}} {{f}} {{{{a}} {{a}}}} {{{{-1}} {{f}}}}} + {{{-1}} {{f}} {{{{a}} {{a}}}} {{{{f}} {{f}}}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${{{a}^{2}}} {{{f}^{2}}}$	<br>
*/Prune/flatten	${{{a}^{2}}} {{{f}^{2}}}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${a}^{2}$	<br>
+/Prune/combineConstants	$2$	<br>
*/Prune/apply	${f}^{2}$	<br>
+/Prune/combineConstants	$3$	<br>
*/Prune/apply	${{-1}} {{{a}^{2}}} {{{f}^{3}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
*/Factor/combineMulOfLikePow	${\left({{{a}} {{f}}}\right)}^{2}$	<br>
Factor	${{{-1}} {{f}} {{{a}^{2}}}} + {{\left({{{a}} {{f}}}\right)}^{2}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Expand	${{{-1}} {{f}} {{{{a}} {{a}}}}} + {{{{{a}} {{a}}}} {{{{f}} {{f}}}}} + {{{-1}} {{{{a}} {{a}}}} {{{{f}} {{f}} {{f}}}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Factor	${{{-1}} {{f}} {{{a}^{2}}}} + {{\left({{{a}} {{f}}}\right)}^{2}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Prune	${{{-1}} {{f}} {{{a}^{2}}}} + {{{{a}^{2}}} {{{f}^{2}}}} + {{{-1}} {{{a}^{2}}} {{{f}^{3}}}}$	<br>
Tidy	${-{{{f}} {{{a}^{2}}}}} + {{{{{a}^{2}}} {{{f}^{2}}}} - {{{{a}^{2}}} {{{f}^{3}}}}}$	<br>

<span style="color:green">GOOD</span>
</td></tr>
