<!doctype html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>test</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
    </head>
	<body onload='tryToFindMathJax();'>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b>multiply by 1</b><br>
<code>asserteq(1, (Constant(1)*Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>divide by 1</b><br>
<code>asserteq(1, (Constant(1)/Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>divide by -1</b><br>
<code>asserteq(-1, (-Constant(1)/Constant(1))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>multiply and divide by 1</b><br>
<code>asserteq(1, (Constant(1)/(Constant(1)*Constant(1)))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>commutativity</b><br>
<code></code>
</td><td>
<tr><td>
<b>add commutative</b><br>
<code>asserteq(x+y, y+x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>mul commutative</b><br>
<code>asserteq(x*y, y*x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>pruning operations</b><br>
<code></code>
</td><td>
<tr><td>
<b>prune 1*</b><br>
<code>asserteq(x, (1*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>prune *1</b><br>
<code>asserteq(x, (x*1)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>prune *0</b><br>
<code>asserteq(0, (0*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x/x)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(x^2, (x*x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>simplify(): div add mul</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(((x+1)*y)(), (x*y + y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((x+1)*(y+1))(), (x*y + x + y + 1)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((2/(2*x*y))(), (1/(x*y))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1-(1-x))(), x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((1-(1-x))/x)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1 + 1/x + 1/x)(), (1 + 2/x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1 + 1/x + 2/x)(), (1 + 3/x)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>factoring integers</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((Constant(2)/Constant(2))(), Constant(1))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((Constant(2)/Constant(4))(), (Constant(1)/Constant(2))())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(((2*x + 2*y)/2)(), (x+y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(((-2*x + 2*y)/2)(), (-x+y)())</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(-1-x, -(1+x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((-x)/x, -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x/(-x)), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-x-1)/(x+1), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x-1)/(1-x), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>expand(): add div mul</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>factor(): mul add div</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>trigonometry</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((symmath.sin(x)^2+symmath.cos(x)^2)(), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((y*symmath.sin(x)^2+y*symmath.cos(x)^2)(), y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((y+y*symmath.sin(x)^2+y*symmath.cos(x)^2)(), 2*y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((1+y*symmath.sin(x)^2+y*symmath.cos(x)^2)(), 1+y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(1+symmath.cos(x)^2+symmath.cos(x)^2, 1+2*symmath.cos(x)^2)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(-1+symmath.cos(x)^2+symmath.cos(x)^2, -1+2*symmath.cos(x)^2)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq((y-x)/(x-y), -1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((x+y)/(x+y)^2, 1/(x+y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq((-x+y)/(-x+y)^2, 1/(-x+y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy^2 - gUxx*gUyy) / (gUxx * gUyy - gUxy^2), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy - gUxx*gUyy) / (gUxx * gUyy - gUxy), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( gUxy * (gUxy - gUxx) / (gUxx - gUxy), -gUxy)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>print(sqrt(-1)())</code>
</td><td>
$â…ˆ$

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(sqrt(-1), i)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>make sure, when distributing sqrt()'s, that the negative signs on the inside are simplified in advance</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( ((((-x*a - x*b)))^frac(1,2)), i * (sqrt(x) * sqrt(a+b)) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( (-(((-x*a - x*b)))^frac(1,2)), -i * (sqrt(x) * sqrt(a+b)) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( ((((-x*a - x*b)*-1))^frac(1,2)), (sqrt(x) * sqrt(a+b)) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( (-(((-x*a - x*b)*-1))^frac(1,2)), -(sqrt(x) * sqrt(a+b)) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>If sqrt, -1, and mul factor run out of order then -sqrt(-x) and sqrt(-x) will end up equal.  And that is bad for things like solve() on quadratics.</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( ((((-x*a - x*b)/-1)/y)^frac(1,2)), (sqrt(x) * sqrt(a+b)) / sqrt(y) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( (-(((-x*a - x*b)/-1)/y)^frac(1,2)), -(sqrt(x) * sqrt(a+b)) / sqrt(y) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>it would be nice if the final form of sin(x)^2 was exactly that.</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert( printbr((sin(x)^2)()) == sin(x)^2 )</code>
</td><td>
${1} - {{cos\left(  x\right)}^{2}}$
<br>
expected false to be true<br>
<span style="color:red">BAD</span><br>/home/chris/Projects/lua/symmath/tests/unit/unit.lua:10: failed<br>stack traceback:<br>
	/home/chris/Projects/lua/symmath/tests/unit/unit.lua:93: in function </home/chris/Projects/lua/symmath/tests/unit/unit.lua:92><br>
	[C]: in function 'error'<br>
	/home/chris/Projects/lua/symmath/tests/unit/unit.lua:10: in function 'assert'<br>
	[string "assert( printbr((sin(x)^2)()) == sin(x)^2 )"]:1: in main chunk<br>
	/home/chris/Projects/lua/symmath/tests/unit/unit.lua:85: in function </home/chris/Projects/lua/symmath/tests/unit/unit.lua:84><br>
	[C]: in function 'xpcall'<br>
	/home/chris/Projects/lua/symmath/tests/unit/unit.lua:84: in function 'exec'<br>
	./test.lua:106: in main chunk<br>
	[C]: at 0x562ec5f321c0
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert( not( Constant(0) == x * y ) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert( Constant(0) ~= x * y )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):subst( (v'^k' * v'^l' * g'_kl'):eq(var'vsq') ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):replace( v'^k' * v'^l' * g'_kl', var'vsq' ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>printbr( Constant(0):replace( v'^k' * v'^l', var'vsq' ) )</code>
</td><td>
$0$
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( Constant(0):replace( v'^k', var'vsq' ), Constant(0) )</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
