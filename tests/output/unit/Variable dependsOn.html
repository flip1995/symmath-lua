<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>Variable dependsOn</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
	</head>
	<body onload='tryToFindMathJax();'>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b>testing dependency</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y:getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y'^p':getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>depends regardless of specification</b><br>
<code>assert(true == y:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was not specified</b><br>
<code>assert(false == y:dependsOn(y'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was not specified</b><br>
<code>assert(false == y'^p':dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>depends regardless of specification</b><br>
<code>assert(true == y'^p':dependsOn(y'^q'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y:setDependentVars(x'^a')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y:getDependentVars() == 1 and y:getDependentVars()[1] == x'^a')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y'^p':getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y'^pq':getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was not specified</b><br>
<code>assert(false == y'^p':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was not specified</b><br>
<code>assert(false == y'^p':dependsOn(x'^q'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was specified</b><br>
<code>assert(true == y:dependsOn(x'^q'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>was not specified</b><br>
<code>assert(false == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>not by default</b><br>
<code>assert(false == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y:setDependentVars(x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y:getDependentVars() == 1 and y:getDependentVars()[1] == x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y'^p':getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(#y'^pq':getDependentVars() == 0)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>TODO this should be in tests/unit/diff.lua</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(y), 1)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>assert and not asserteq so the rhs doesn't simplify</b><br>
<code>assert(y:diff(x)() == y:diff(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x,z), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(y'^p':diff(y'^q'), delta'^p_q')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'_p':diff(y'_q'), delta'_p^q')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'_p':diff(y'^q'), g'_pq')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^p':diff(y'_q'), g'^pq')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq(y'^pq':diff(y'^rs'), delta'^p_r' * delta'^q_s')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y:setDependentVars(x'^a')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^p'), y:diff(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y'^a':setDependentVars(x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y'^i':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x), y'^i':diff(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y'^a':setDependentVars(x'^b')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y'^i':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^i':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^ij':dependsOn(x'^pq'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y:diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^p'), y'^i':diff(x'^p'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^i':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^p'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq(y'^ij':diff(x'^pq'), zero)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>testing graph dependency z(y(x)), z depends on x</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>x = symmath.var'x'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y = symmath.var('y', {x})</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>z = symmath.var('z', {y})</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x:dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == x:dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert(false == z:dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z:dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z:dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x:dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x:dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x:dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert(false == z'^I':dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z'^I':dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z'^I':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^I':dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^I':dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^I':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(x))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>by default</b><br>
<code>assert(true == z'^I':dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z'^I':dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == z'^I':dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^I':dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>by default</b><br>
<code>assert(true == y'^I':dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y'^I':dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(z'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(y'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>by default</b><br>
<code>assert(true == x'^I':dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>testing graph dependency z(y(x'^I')), z depends on x</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>x = symmath.var'x'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y = symmath.var'y'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>y:setDependentVars(x'^I')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>z = symmath.var'z'</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>z:setDependentVars(y)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == z:dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == y:dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == y:dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(z))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(false == x'^I':dependsOn(y))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>assert(true == x'^I':dependsOn(x'^I'))</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>make definite variable objects in our scope so implicit variable creation doesn't replace them and reset their state</b><br>
<code></code>
</td><td>
<tr><td>
<b>alright, I'm at an impass here ...</b><br>
<code></code>
</td><td>
<tr><td>
<b>before I fixed chain dependencies, I had a good system where {u,v}:depends{t,x} would only produce du/dt du/dx dv/dt dv/dx</b><br>
<code></code>
</td><td>
<tr><td>
<b>but now, with chain dependencies, I'm also getting dv/du, du/dv, dt/dx, dx/dt ... and this is incorrect</b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>u,v,t,x,y,z = vars('u','v','t','x','y','z')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>u:setDependentVars(t,x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>v:setDependentVars(t,x)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>t:setDependentVars(u,v)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>x:setDependentVars(u,v)</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>allvars = table{u,v,t,x,y,z}</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>all = Matrix(allvars):T()</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>varofall = var('\\{'..allvars:mapi(function(v) return v.name end):concat','..'\\}')</code>
</td><td>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>print(varofall:diff(varofall):eq(Matrix:lambda({#all,#all}, function(i,j) return allvars[i]:diff(allvars[j])() end)))</code>
</td><td>
${\frac{\partial \{u,v,t,x,y,z\}}{\partial \{u,v,t,x,y,z\}}} = {\left[ \begin{matrix}  1 &  \frac{\partial u}{\partial v} &  \frac{\partial u}{\partial t} &  \frac{\partial u}{\partial x} &  0 &  0 \\  \frac{\partial v}{\partial u} &  1 &  \frac{\partial v}{\partial t} &  \frac{\partial v}{\partial x} &  0 &  0 \\  \frac{\partial t}{\partial u} &  \frac{\partial t}{\partial v} &  1 &  \frac{\partial t}{\partial x} &  0 &  0 \\  \frac{\partial x}{\partial u} &  \frac{\partial x}{\partial v} &  \frac{\partial x}{\partial t} &  1 &  0 &  0 \\  0 &  0 &  0 &  0 &  1 &  0 \\  0 &  0 &  0 &  0 &  0 &  1\end{matrix} \right]}$

<span style="color:green">GOOD</span>
</td></tr>
