<!doctype html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>replaceIndex</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
    </head>
	<body onload='tryToFindMathJax();'>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b></b><br>
<code>asserteq( a:replaceIndex(a, b), b )</code>
</td><td>
selfFixed: {}
<br>
selfSum: {}
<br>
findFixed: {}
<br>
findSum: {}
<br>
replFixed: {}
<br>
replSum: {}
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>variance must match in order for the replace to work</b><br>
<code>asserteq( a'_a':replaceIndex(a'^u', b'^u'), a'_a' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=false, symbol="u"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=false, symbol="u"}
}
<br>
replSum: {}
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'^a':replaceIndex(a'^b', b'^b'), b'^a' )</code>
</td><td>
selfFixed: {
	{count=1, lower=false, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'^a':replaceIndex(a'^b', b'^b' + c'^b'), b'^a' + c'^a' )</code>
</td><td>
selfFixed: {
	{count=1, lower=false, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b>the sum indexes won't use the same symbol, because the symbols are not preserved and instead chosen among unused symbols in the result expression</b><br>
<code>asserteq( a'^a':replaceIndex(a'^b', b'^bc' * c'_c'), b'^ab' * c'_b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=false, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
replSum: {
	{count=2, lower=false, symbol="c"}
}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{"b"}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'^a':replaceIndex(a'^b', b'^b' + c'^bc' * d'_c'), b'^a' + c'^ac' * d'_c' )</code>
</td><td>
selfFixed: {
	{count=1, lower=false, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=false, symbol="b"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>TODO looks like indexes get reversed</b><br>
<code>asserteq( a'_ab':replaceIndex(a'_uv', b'_uv'), b'_ab' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"},
	{count=1, lower=true, symbol="b"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a", "b"}
<br>
xsymbols	{"a", "b"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'_ab':replaceIndex(a'_uv', b'_vu'), b'_ba' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"},
	{count=1, lower=true, symbol="b"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="v"},
	{count=1, lower=true, symbol="u"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a", "b"}
<br>
xsymbols	{"a", "b"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'_ba':replaceIndex(a'_uv', b'_vu'), b'_ab' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="b"},
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="v"},
	{count=1, lower=true, symbol="u"}
}
<br>
replSum: {}
<br>
selfsymbols	{"b", "a"}
<br>
xsymbols	{"b", "a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'_ab':replaceIndex(a'_vu', b'_uv'), b'_ba' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"},
	{count=1, lower=true, symbol="b"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="v"},
	{count=1, lower=true, symbol="u"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a", "b"}
<br>
xsymbols	{"a", "b"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'_ba':replaceIndex(a'_vu', b'_uv'), b'_ab' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="b"},
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="v"},
	{count=1, lower=true, symbol="u"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>
selfsymbols	{"b", "a"}
<br>
xsymbols	{"b", "a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( (a'_a' + b'_ab' * c'^b'):replaceIndex(a'_u', b'_u'), b'_a' + b'_ab' * c'^b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>TODO this should preserve the order of b_ab -> c_ab</b><br>
<code>asserteq( (a'_a' + b'_ab' * c'^b'):replaceIndex(b'_uv', c'_uv'), a'_a' + c'_ab' * c'^b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a", "b"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>TODO this should preserve the order of b_ab -> d_ab</b><br>
<code>asserteq( (a'_a' + b'_ab' * c'^b'):replaceIndex(b'_uv', d'_uv'), a'_a' + d'_ab' * c'^b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a", "b"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b>what should this produce?  Technically it is invalid match, since the from and to don't have matching fixed indexes.  So... assert error?</b><br>
<code>asserterror(function() (a'_a' + b'_ab' * c'^b'):replaceIndex(b'_uv', c'_bv') end )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="a"}
}
<br>
selfSum: {}
<br>
findFixed: {
	{count=1, lower=true, symbol="u"},
	{count=1, lower=true, symbol="v"}
}
<br>
findSum: {}
<br>
replFixed: {
	{count=1, lower=true, symbol="b"},
	{count=1, lower=true, symbol="v"}
}
<br>
replSum: {}
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( a'^a_a':replaceIndex(a'^a_a', b'^a_a'), b'^a_a')</code>
</td><td>
selfFixed: {}
<br>
selfSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
findFixed: {}
<br>
findSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
replFixed: {}
<br>
replSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{"b"}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'^a_a':replaceIndex(a'^u_u', b'^u_u'), b'^a_a')</code>
</td><td>
selfFixed: {}
<br>
selfSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
findFixed: {}
<br>
findSum: {
	{count=2, lower=false, symbol="u"}
}
<br>
replFixed: {}
<br>
replSum: {
	{count=2, lower=false, symbol="u"}
}
<br>
selfsymbols	{"a"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{"b"}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( (a'^a_a' * a'^b_b'):replaceIndex(a'^u_u', b'^u_u'), b'^a_a' * b'^b_b')</code>
</td><td>
selfFixed: {}
<br>
selfSum: {
	{count=2, lower=false, symbol="a"},
	{count=2, lower=false, symbol="b"}
}
<br>
findFixed: {}
<br>
findSum: {
	{count=2, lower=false, symbol="u"}
}
<br>
replFixed: {}
<br>
replSum: {
	{count=2, lower=false, symbol="u"}
}
<br>
selfsymbols	{"a", "b"}
<br>
xsymbols	{"a"}
<br>
newsumsymbols	{"c"}
<br>
numsumusedalready	nil
<br>
selfsymbols	{"a", "b"}
<br>
xsymbols	{"b"}
<br>
newsumsymbols	{"d"}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
<tr><td>
<b></b><br>
<code>asserteq( a'^a_ab':replaceIndex(a'^a_ab', b'_b'), b'_b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
selfSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
findFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
findSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
replFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
replSum: {}
<br>
selfsymbols	{"b", "a"}
<br>
xsymbols	{"b", "a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
<tr><td>
<b></b><br>
<code>asserteq( a'^a_ab':replaceIndex(a'^a_ab', b'_b' + c'_a^a_b'), b'_b' + c'_a^a_b' )</code>
</td><td>
selfFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
selfSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
findFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
findSum: {
	{count=2, lower=false, symbol="a"}
}
<br>
replFixed: {
	{count=1, lower=true, symbol="b"}
}
<br>
replSum: {}
<br>
selfsymbols	{"b", "a"}
<br>
xsymbols	{"b", "a"}
<br>
newsumsymbols	{}
<br>
numsumusedalready	nil
<br>

<span style="color:green">GOOD</span>
</td></tr>
