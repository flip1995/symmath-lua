<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>tests/unit/index_construction</title>
		<script type='text/javascript' src='../tryToFindMathJax.js'></script>
	</head>
	<body onload='tryToFindMathJax();'>

<table border="1" style="border-collapse:collapse">
<tr><td>
<b>upper by default</b><br>
<code>local x=a'i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</code>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.070000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'^i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</code>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.046000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'_i' 	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true})</code>
</td><td>
${ a} _i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.046000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=false})</code>
</td><td>
${{ a} ^i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.056000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'i_j' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=true})</code>
</td><td>
${{ a} ^i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.128000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'^ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=false})</code>
</td><td>
${{ a} ^i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.054000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'^i_j'	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false} and x[3]==Tensor.Index{symbol='j', lower=true})</code>
</td><td>
${{ a} ^i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.086000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'_i^j'	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true} and x[3]==Tensor.Index{symbol='j', lower=false})</code>
</td><td>
${{ a} _i} ^j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.043000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'_ij' 	print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true} and x[3]==Tensor.Index{symbol='j', lower=true})</code>
</td><td>
${{ a} _i} _j$

<span style="color:green">GOOD</span>
</td><td>
time: 0.099000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>multi-char</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>upper by default</b><br>
<code>local x=a' i' 			print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false})</code>
</td><td>
${ a} ^i$

<span style="color:green">GOOD</span>
</td><td>
time: 0.082000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b>upper by default</b><br>
<code>local x=a' \\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false})</code>
</td><td>
${ a} ^{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.098000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a' ^\\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false})</code>
</td><td>
${ a} ^{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.043000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a' _\\mu' 		print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=true})</code>
</td><td>
${ a} _{\mu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.044000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a' \\mu \\nu' print(x)	assert(#x==3 and x[1]==a and x[2]==Tensor.Index{symbol='\\mu', lower=false} and x[3]==Tensor.Index{symbol='\\nu', lower=false})</code>
</td><td>
${{ a} ^{\mu}} ^{\nu}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.155000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>commas are lower by default</b><br>
<code>local x=a',i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</code>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.049000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a',^i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false, derivative=','})</code>
</td><td>
${ a} ^{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.037000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a',_i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</code>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.081000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'^,i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=false, derivative=','})</code>
</td><td>
${ a} ^{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.039000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code>local x=a'_,i'	print(x)	assert(#x==2 and x[1]==a and x[2]==Tensor.Index{symbol='i', lower=true, derivative=','})</code>
</td><td>
${ a} _{,i}$

<span style="color:green">GOOD</span>
</td><td>
time: 0.142000ms<br>
stack: size: 0<br><ul style="margin:0px"></ul>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>TODO multiple indexes with commas mixed</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b>TODO multiple indexes with commas mixed with multiple chars</b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<code></code>
</td><td>
</td><td>
</td></tr>
<tr><td>
<b></b><br>
<code>simplifyAssertNe(a'^,i', a'_,i')</code>
</td><td>

<span style="color:green">GOOD</span>
</td><td>
time: 1.523000ms<br>
stack: size: 7<br><ul style="margin:0px"><li>Init<br><li>Prune<br><li>Expand<br><li>Prune<br><li>Factor<br><li>Prune<br><li>Tidy</ul>
</td></tr>
